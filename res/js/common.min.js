String.prototype.format=function(){var a=arguments;return this.replace(/\{(\d+)\}/g,function(){var b=a[arguments[1]];return(b==undefined||b==null)?arguments[0]:b})};String.prototype.ConvertJSONDateToJSDateObject=function(){return new Date(parseInt(this.replace("/Date(","").replace(")/",""),10))};var formSubmit=function(a,f,d){var b=$("<form />");b.attr("action",a);d=d||"post";b.attr("method",d);for(var e in f){var c=$("<input />");c.attr("type","hidden");c.attr("name",e);c.attr("value",f[e]);b.append(c)}b.css("display","none");b.appendTo("body");b.submit()};var PopWindow={Destroy:function(){$("#popwindow_background").remove();$("#popwindow_container").remove()},Render:function(b,a){$("body").append('<div id="popwindow_background"></div><div id="popwindow_container"><div id="popwindow"><img class="icon" src="/Static/Images/Common/Loading.gif"/><div class="detail">'+a+"</div></div></div>");$("#popwindow").css("margin-top",($(window).height()-$("#popwindow").height())/2).show()},Black:function(){$("body").append('<div id="popwindow_background"></div>')}};function MVC(e,g,b){var d=new e();var f=new g();var a=new b();a.model=d;a.view=f;f.controller=a;if(typeof f.Init=="function"){f.Init()}if(typeof f.init=="function"){f.init()}}var verifyUtils={mobile:function(a){if(a===void (0)){return false}a=$.trim(a);if(a.length!==11){return false}return/^1[3456789][0-9]{9}$/.test(a)},cardNo:function(a){if(a===void (0)){return false}return(/^\d{16,19}$/.test($.trim(a)))},username:function(b){if(b===void (0)){return false}var a=$.trim(b).length;if(a===0||a>50){return false}return true}};function tipsPopup(b){var a=$("<div>");a.popup({popupWrapSelector:"#js-tips-popup-wrap",callback:{show:function(d,c){b&&c.find("h2").text(b)},hide:function(){a.unbindPopup({popupWrapSelector:"#js-tips-popup-wrap"})}}}).trigger("click")}(function(a){a.fn.popup=function(j){var k=a.extend(true,{},a.fn.popup.defaults,j),e=k.callback,n=a(k.popupWrapSelector),o=0,l=n.find(k.popupSelector),m=0,f=n.find(k.closeSelector),i="."+(+new Date+Math.random()),r=a(window),p=0,b=a("body"),c=b.css("position"),d=b.css("top"),h=a.noop;this.data("_popupNamespace",i);if(!k.isFullScreen){h=function(){if(n.hasClass(k.showClass)){o=n.height();m=l.outerHeight()}else{n.addClass(k.showClass);o=n.height();m=l.outerHeight();n.removeClass(k.showClass)}if(m>o){l.css("margin-top",-o/2)}else{l.css("margin-top",-m/2)}}}h();function q(){p=r.scrollTop();n.addClass(k.showClass);b.css({position:"fixed",top:-p});r.scrollTop(p)}function g(){n.removeClass(k.showClass);b.css({position:c,top:d});r.scrollTop(p)}this.on("click"+i,function(){if(e.isAfterShow){e.show(q,n,h)}else{h();q();e.show(q,n,h)}});n.add(f).on("click"+i,function(s){k.isClosePreventDefault&&s.preventDefault();if(e.isAfterHide){e.hide(g,n,a(this))}else{g();e.hide(g,n,a(this))}});l.on("click"+i,function(s){s.stopPropagation()});r.on("resize"+i,function(){setTimeout(h,300)});return this};a.fn.popup.defaults={isClosePreventDefault:false,isFullScreen:false,popupWrapSelector:"#js-popup-wrap",popupSelector:"div.popup",closeSelector:".close",showClass:"show",callback:{isAfterShow:false,isAfterHide:false,show:a.noop,hide:a.noop}};a.fn.unbindPopup=function(d){var e=a.extend(true,{},a.fn.popup.defaults,d),g=a(e.popupWrapSelector),f=g.find(e.popupSelector),b=g.find(e.closeSelector),c=this.data("_popupNamespace");if(c){this.off("click"+c);g.add(b).off("click"+c);f.off("click"+c);a(window).off("resize"+c)}return this};a.fn.scrollUpDown=function(i){var l=this,j=a.extend({},a.fn.scrollUpDown.defaults,i),b=this.find(j.bigContainerSelector),h="."+(+new Date+Math.random()),e=b.find(j.itemSelector).outerHeight(),f=l.height()-b.height(),c=true,m=0,g=0,n=0;this.data("_scrollUpDownNamespace",h);function k(p,o){b.css({"transition-duration":o+"ms",transform:"translateY("+p+"px)"})}function d(o){if(j.load!==a.noop){f=l.height()-b.height();c&&(e=b.find(j.itemSelector).outerHeight());c=false}if(f>=0){return}l.on("touchstart"+h,function(p){m=p.originalEvent.touches[0].pageY}).on("touchmove"+h,function(p){p.preventDefault();g=p.originalEvent.touches[0].pageY-m;k(n+g,0)}).on("touchend"+h,function(p){n+=g;g=0;if(j.load!==a.noop&&n<f){if(!o){l.off(h);h="."+(+new Date+Math.random());l.data("_scrollUpDownNamespace",h);j.load(d)}else{d(true)}}if(n>0){n=0}else{if(n<f){n=f}else{n=Math.round(n/e)*e}}k(n,j.scrollTime)})}if(j.load!==a.noop&&j.isPerformLoad){j.load(d,true)}if(f<0){d()}return this};a.fn.scrollUpDown.defaults={scrollTime:600,bigContainerSelector:"ul",itemSelector:"li",isPerformLoad:true,load:a.noop};a.fn.unbindScrollUpDown=function(){var b=this.data("_scrollUpDownNamespace");b&&this.off(b);return this};a.fn.tab=function(g){var h=a.extend({},a.fn.tab.defaults,g),b=h.isContent&&a(h.contentItemSelector),d=-1,j=a.noop;if(h.isIndex){var f=this.find(h.menuItemSelector);for(var c=0,e=f.length;c<e;c++){if(f.eq(c).hasClass(h.menuCurrent)){d=c;break}}if(d===-1){f.eq(0).addClass(h.menuCurrent);if(h.isContent){b.eq(0).addClass(h.contentCurrent)}d=0}j=function(k){var i=k.index();f.eq(d).removeClass(h.menuCurrent);k.addClass(h.menuCurrent);if(h.isContent){b.eq(d).removeClass(h.contentCurrent).end().eq(i).addClass(h.contentCurrent);h.callback(k,b.eq(i))}else{h.callback(k)}d=i}}else{j=function(l){var k=l.data(h.data);l.addClass(h.menuCurrent).siblings().removeClass(h.menuCurrent);if(h.isContent){var i;b.each(function(m,o){var n=a(o);if(n.data(h.data)===k){n.addClass(h.contentCurrent);i=n}else{n.removeClass(h.contentCurrent)}});h.callback(l,i)}else{h.callback(l)}}}this.on("click",h.menuItemSelector,function(){var i=a(this);if(i.hasClass(h.menuCurrent)||i.hasClass(h.menuDisabled)){return}j(i)});return this};a.fn.tab.defaults={isIndex:false,isContent:true,menuItemSelector:"li",contentItemSelector:"div.content > ul",data:"id",menuCurrent:"current",menuDisabled:"#"+new Date,contentCurrent:"current",callback:a.noop};a.fn.dragTab=function(r){var u=this,s=a.extend({},a.fn.dragTab.defaults,r),b,c,q=this.find(s.navWrapSelector),n=q.find(s.navSelector),p=n.find(s.navItemSelector),o,y,k,e=0,m=p.length,l=-1,g=-1,v=0,d=0,t=a.noop,x=0,j=true;if(s.isContent){b=this.find(s.contentSelector);c=b.find(s.contentItemSelector)}for(var f=0;f<m;f++){if(p.eq(f).hasClass(s.currentClass)){l=f;break}}if(l===-1){l=0;p.eq(l).addClass(s.currentClass);s.isContent&&c.eq(l).addClass(s.currentClass)}g=l;function h(){n.css({"transition-duration":"0ms",transform:"translateX(0px)"});y=u.width();k=p.outerWidth(true);e=Math.round(Math.round(y/k)/2);n.empty().append(p);if(y<=k*m){p.clone().appendTo(n);t=function(i){if(g<e-1){g+=m;l+=m;x=k*-l+(y-k)/2;n.css({"transition-duration":"0ms",transform:"translateX("+x+"px)"})}else{if(g>=2*m-e){g-=m;l-=m;x=k*-l+(y-k)/2;n.css({"transition-duration":"0ms",transform:"translateX("+x+"px)"})}}x+=(l-g)*k;setTimeout(function(){n.css({"transition-duration":i+"ms",transform:"translateX("+x+"px)"})},1)}}else{t=a.noop}o=n.find(s.navItemSelector);t(0)}h();function w(){o.eq(l).removeClass(s.currentClass);o.eq(g).addClass(s.currentClass);if(t!==a.noop){o.eq(l<m?l+m:l-m).removeClass(s.currentClass);o.eq(g<m?g+m:g-m).addClass(s.currentClass)}s.isContent&&c.eq(l<m?l:l-m).removeClass(s.currentClass).end().eq(g<m?g:g-m).addClass(s.currentClass);t(s.time);setTimeout(function(){j=true},s.time);l=g}q.on("click",s.navItemSelector,function(){if(!a(this).hasClass(s.currentClass)&&j){g=a(this).index();j=false;w()}}).on("touchstart",function(i){if(t!==a.noop&&j){v=i.originalEvent.touches[0].pageX;d=v}}).on("touchmove",function(i){i.preventDefault();if(t!==a.noop&&j){d=i.originalEvent.touches[0].pageX}}).on("touchend",function(i){if(t!==a.noop&&j){if(d>v){j=false;g--;w()}else{if(d<v){j=false;g++;w()}}}});a(window).on("resize",function(){setTimeout(function(){if(j){h()}},200)});return this};a.fn.dragTab.defaults={isContent:true,time:300,navWrapSelector:"div.comment-nav-wrap",navSelector:"ul.comment-nav",navItemSelector:"li",contentSelector:"ul.comment-content",contentItemSelector:"li",currentClass:"current"};a.fn.lazyLoad=function(f){var g=a.extend({},a.fn.lazyLoad.defaults,f),h=this,c=h.height(),b=a("body"),e="."+(+new Date+Math.random());this.data("_lazyLoadNamespace",e);function d(i){h.on("scroll"+e,function(){if(b.height()-h.scrollTop()-c<g.minHeight){h.off("scroll"+e);e="."+(+new Date+Math.random());h.data("_lazyLoadNamespace",e);if(!i){g.load(d)}}})}h.on("resize",function(){setTimeout(function(){c=h.height()},300)});if(g.isPerformLoad){g.load(d)}else{d()}return this};a.fn.lazyLoad.defaults={minHeight:100,isPerformLoad:false,load:a.noop};a.fn.unbindLazyLoad=function(c){var d=a.extend({},a.fn.lazyLoad.defaults,c),b=this.data("_lazyLoadNamespace");b&&this.off("scroll"+b);return this};a.fn.dragSelect=function(o){var p=a.extend({},a.fn.dragSelect.defaults,o),u=this,q=this.find(p.overlaySelector),r=q.find(p.overlayCurrentSelector),c=this.find(p.contentWrapSelector),b=c.find(p.contentListWrapSelector),i=b.length,v=0,l=0,x=0,h,g,s,k,j,n,d,e=p.contentListSelector+"."+p.currentClass,m="."+(+new Date+Math.random());this.data("_dragSelectNamespace",m);function f(y){d=y;if(j===void (0)){if(!u.hasClass(p.show)){u.addClass(p.show);s=q.width();g=r.outerHeight();n=Math.round((r.offset().top-c.offset().top)/g);j=n*g;u.removeClass(p.show)}else{s=q.width();g=r.outerHeight();n=Math.round((r.offset().top-c.offset().top)/g);j=n*g}}t((n-d.find(e).index())*g,0)}function t(A,z){d.css({"transition-duration":z+"ms",transform:"translateY("+A+"px)"})}function w(z){var y=Math.floor(z/s*i);d=b.eq(y<i?y:i-1);k=g-d.height()+j}this.on("touchstart"+m,p.overlaySelector,function(y){v=y.originalEvent.touches[0].pageY;w(y.originalEvent.touches[0].pageX)}).on("touchmove"+m,p.overlaySelector,function(y){y.preventDefault();l=y.originalEvent.touches[0].pageY-v;t(x+l,0)}).on("touchend"+m,p.overlaySelector,function(z){x+=l;l=0;if(x>j){x=j}else{if(x<k){x=k}}var A=-Math.round(x/g),y=d.find(p.contentListSelector).eq(A+n);d.find(e).removeClass(p.currentClass);y.addClass(p.currentClass);x=-A*g;t(x,p.scrollTime);if(h!==x){h=x;p.callback(f,y)}});if(p.isPerformCallback){p.callback(f)}else{b.each(function(){f(a(this))})}return this};a.fn.dragSelect.defaults={show:"show",scrollTime:600,overlaySelector:"div.popup-overlay",overlayCurrentSelector:"div",contentWrapSelector:"div.level",contentListWrapSelector:"ul",contentListSelector:"li",currentClass:"current",isPerformCallback:true,callback:a.noop};a.fn.unbindDragSelect=function(c){var d=a.extend({},a.fn.dragSelect.defaults,c),b=this.data("_dragSelectNamespace");b&&this.off(b,d.overlaySelector);return this}})(jQuery);function setBodyHeight(e,b){var g=$(window),a=$("body"),d=$("#header"),b=b||$("#body"),c=$("#footer"),f="."+(+new Date+Math.random());g.off(g.data("_bodyHeightResize_namespace")||f).on("resize"+f,function(){b.removeAttr("style");if(!e){if(g.height()>a.height()){b.css("min-height",g.height()-d.outerHeight(true)-c.outerHeight(true))}}else{b.css("height",g.height()-d.outerHeight(true)-c.outerHeight(true))}}).trigger("resize");g.data("_bodyHeightResize_namespace",f)}function addURLRandom(a){if(a.indexOf("?")!==-1){return a+="&_v"+Math.random().toFixed(3)+"="+Math.random().toFixed(3)}else{return a+="?_v"+Math.random().toFixed(3)+"="+Math.random().toFixed(3)}}jQuery(function(a){setBodyHeight();a(".global_back_home.disable").click(function(b){return b.preventDefault()});setTimeout(function(){a("html,body").scrollTop(0)},300);(function(){var g=navigator.userAgent;if(/AiHuiShouApp/i.test(g)){var f=location.href;if(/\/\/Trade\/Success[\/]*($|[?#])/i.test(f)){a("#share").hide()}a("#js-index-pc").hide();a("a.js-index-oldcloth-banner").on("click",function(h){h.preventDefault()});a("li.js-index-oldcloth").hide()}else{if(/\/Home\/(Intro|Lowprice)\/*($|[?#])/i.test(f)){a("#header").hide()}}if(/aihuishou_android/i.test(g)){var f=location.href,c=false,d=0,b=0;if(/\/user\/*($|[?#])/i.test(f)){var e=a(document.body);a(document).on("touchstart",function(h){if(a(window).scrollTop()<=0&&e.css("position")!=="fixed"){c=true;d=h.originalEvent.touches[0].pageY}}).on("touchmove",function(h){if(!c){return}b=h.originalEvent.touches[0].pageY;if(b>=d){h.preventDefault()}else{c=false}}).on("touchend",function(){if(!c){return}c=false;if(b>d+50){location.reload(true)}})}}})()});